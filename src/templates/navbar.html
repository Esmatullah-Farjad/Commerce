{% load i18n %}
{% load static %}
<aside id="app-sidebar" class="fixed inset-y-0 left-0 z-40 w-72 border-r border-slate-800 bg-slate-950 text-slate-100 shadow-2xl transition-transform duration-300">
    <div class="flex h-full min-h-0 flex-col gap-6 px-6 py-6">
        <a href="{% url 'root-view' %}" class="flex items-center gap-3">
            <span class="flex h-11 w-11 items-center justify-center rounded-2xl bg-primary-500/20 ring-1 ring-primary-400/50">
                <img src="{% static 'image/logo.svg' %}" alt="Logo" class="h-6 w-6">
            </span>
            <div>
                <p class="text-xs uppercase tracking-[0.35em] text-primary-300">{% trans "Commerce" %}</p>
                <p class="text-lg font-semibold text-white">{% trans "Inventory Hub" %}</p>
            </div>
        </a>

        {% if request.user.is_authenticated %}
        <div class="rounded-2xl border border-slate-800 bg-slate-800/60 p-4">
            <p class="text-xs text-slate-400">{% trans "Signed in as" %}</p>
            <p class="text-sm font-semibold text-white">{{ request.user.username }}</p>
            <p class="text-xs text-slate-400">{{ request.user.email }}</p>
        </div>
        {% endif %}

        <nav class="sidebar-scroll flex-1 space-y-1 overflow-y-auto pr-2 text-sm">
            <a href="{% url 'home' %}" class="flex items-center justify-between rounded-xl px-3 py-2 transition {% if request.path == '/home/' %}bg-primary-600 text-white shadow-lg shadow-primary-500/30{% else %}text-slate-200 hover:bg-slate-800 hover:text-white{% endif %}">
                <span class="flex items-center gap-3">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="h-5 w-5 text-primary-300">
                        <path d="M11.47 3.84a.75.75 0 0 1 1.06 0l7.5 7.5a.75.75 0 1 1-1.06 1.06l-.97-.97V20.25a.75.75 0 0 1-.75.75h-3.75a.75.75 0 0 1-.75-.75V15a.75.75 0 0 0-.75-.75h-1.5a.75.75 0 0 0-.75.75v5.25a.75.75 0 0 1-.75.75H6.75a.75.75 0 0 1-.75-.75V11.44l-.97.97a.75.75 0 0 1-1.06-1.06l7.5-7.5Z" />
                    </svg>
                    {% trans "Home" %}
                </span>
            </a>
            {% if request.user.is_authenticated %}
            <a href="{% url 'purchase' %}" class="flex items-center justify-between rounded-xl px-3 py-2 transition {% if request.path == '/purchase/' %}bg-primary-600 text-white shadow-lg shadow-primary-500/30{% else %}text-slate-200 hover:bg-slate-800 hover:text-white{% endif %}">
                <span class="flex items-center gap-3">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="h-5 w-5 text-primary-300">
                        <path d="M2.25 3.75A.75.75 0 0 1 3 3h18a.75.75 0 0 1 .75.75v1.5a.75.75 0 0 1-.75.75h-1.5v11.25A2.25 2.25 0 0 1 17.25 19.5h-3.75a.75.75 0 0 1-.75-.75v-4.5h-1.5v4.5a.75.75 0 0 1-.75.75H6.75a2.25 2.25 0 0 1-2.25-2.25V6H3a.75.75 0 0 1-.75-.75v-1.5Z" />
                    </svg>
                    {% trans "Purchase" %}
                </span>
            </a>
            <a href="{% url 'products_display' %}" class="flex items-center justify-between rounded-xl px-3 py-2 transition {% if request.path == '/product/list' %}bg-primary-600 text-white shadow-lg shadow-primary-500/30{% else %}text-slate-200 hover:bg-slate-800 hover:text-white{% endif %}">
                <span class="flex items-center gap-3">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="h-5 w-5 text-primary-300">
                        <path d="M6.429 2.25H9.75a.75.75 0 0 1 .75.75v18a.75.75 0 0 1-.75.75H6.429a.75.75 0 0 1-.643-.365l-3.21-5.357a.75.75 0 0 1 0-.768l3.21-5.357a.75.75 0 0 0 0-.768l-3.21-5.357A.75.75 0 0 1 6.429 2.25Zm8.321 0h2.821a.75.75 0 0 1 .643.365l3.21 5.357a.75.75 0 0 1 0 .768l-3.21 5.357a.75.75 0 0 0 0 .768l3.21 5.357a.75.75 0 0 1-.643 1.115H14.75a.75.75 0 0 1-.75-.75V3a.75.75 0 0 1 .75-.75Z" />
                    </svg>
                    {% trans "Products" %}
                </span>
            </a>
            <a href="{% url 'products-view' %}" class="flex items-center justify-between rounded-xl px-3 py-2 transition {% if request.path == '/products/sale' %}bg-primary-600 text-white shadow-lg shadow-primary-500/30{% else %}text-slate-200 hover:bg-slate-800 hover:text-white{% endif %}">
                <span class="flex items-center gap-3">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="h-5 w-5 text-primary-300">
                        <path d="M2.25 2.25a.75.75 0 0 1 .75.75V5.25h18V3a.75.75 0 0 1 1.5 0v18a.75.75 0 0 1-1.5 0v-2.25H3V21a.75.75 0 0 1-1.5 0V3a.75.75 0 0 1 .75-.75Z" />
                    </svg>
                    {% trans "Sale" %}
                </span>
            </a>
            <a href="{% url 'scanner-view' %}" class="flex items-center justify-between rounded-xl px-3 py-2 transition {% if request.path == '/sale/scanner' %}bg-primary-600 text-white shadow-lg shadow-primary-500/30{% else %}text-slate-200 hover:bg-slate-800 hover:text-white{% endif %}">
                <span class="flex items-center gap-3">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="h-5 w-5 text-primary-300">
                        <path d="M4.5 5.25A.75.75 0 0 1 5.25 4.5h1.5a.75.75 0 0 1 0 1.5h-1.5A.75.75 0 0 1 4.5 5.25Zm0 13.5a.75.75 0 0 1 .75-.75h1.5a.75.75 0 0 1 0 1.5h-1.5a.75.75 0 0 1-.75-.75Zm12.75-13.5a.75.75 0 0 1 .75-.75h1.5a.75.75 0 0 1 0 1.5h-1.5a.75.75 0 0 1-.75-.75Zm0 13.5a.75.75 0 0 1 .75-.75h1.5a.75.75 0 0 1 0 1.5h-1.5a.75.75 0 0 1-.75-.75Z" />
                        <path d="M7.5 8.25a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5a.75.75 0 0 1-.75-.75Zm0 3.75a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5a.75.75 0 0 1-.75-.75Zm0 3.75a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5a.75.75 0 0 1-.75-.75Z" />
                    </svg>
                    {% trans "Scanner" %}
                </span>
            </a>
            <a href="{% url 'sold-products-view' %}" class="flex items-center justify-between rounded-xl px-3 py-2 transition {% if request.path == '/product/sold' %}bg-primary-600 text-white shadow-lg shadow-primary-500/30{% else %}text-slate-200 hover:bg-slate-800 hover:text-white{% endif %}">
                <span class="flex items-center gap-3">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="h-5 w-5 text-primary-300">
                        <path d="M4.5 6.75A.75.75 0 0 1 5.25 6h13.5a.75.75 0 0 1 .75.75v10.5a.75.75 0 0 1-.75.75H5.25a.75.75 0 0 1-.75-.75V6.75ZM8.25 9a.75.75 0 0 0 0 1.5h7.5a.75.75 0 0 0 0-1.5h-7.5Zm0 3.75a.75.75 0 0 0 0 1.5H12a.75.75 0 0 0 0-1.5H8.25Z" />
                        <path d="M3 4.5a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 4.5Z" />
                    </svg>
                    {% trans "Sold Products" %}
                </span>
            </a>
            <a href="{% url 'cart-view' %}" class="flex items-center justify-between rounded-xl px-3 py-2 transition {% if request.path == '/sale/cart' %}bg-primary-600 text-white shadow-lg shadow-primary-500/30{% else %}text-slate-200 hover:bg-slate-800 hover:text-white{% endif %}">
                <span class="flex items-center gap-3">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="h-5 w-5 text-primary-300">
                        <path d="M2.25 2.25a.75.75 0 0 1 .75.75v1.5h1.386a1.5 1.5 0 0 1 1.464 1.146l.293 1.176h11.414a1.5 1.5 0 0 1 1.464 1.854l-1.425 6a1.5 1.5 0 0 1-1.464 1.146H7.06a1.5 1.5 0 0 1-1.464-1.146l-1.1-4.4H3a.75.75 0 0 1 0-1.5h2.25a.75.75 0 0 1 .728.57l.318 1.27h11.13l1.104-4.65H5.787l-.692-2.768a.75.75 0 0 0-.728-.57H3V3a.75.75 0 0 1-.75-.75Z" />
                        <path d="M8.25 18.75a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Zm10.5 0a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z" />
                    </svg>
                    {% trans "Cart" %}
                </span>
                <span class="inline-flex items-center rounded-full bg-primary-500/20 px-2 py-0.5 text-xs text-primary-100">
                    <span id="cart_length">{{ cart_length|default:"0" }}</span>
                </span>
            </a>
            <details class="group rounded-xl border border-transparent transition {% if request.path|slice:":11" == '/dashboard/' or request.path == '/sales/dashboard' %}bg-primary-600/15 text-white ring-1 ring-primary-500/30{% else %}text-slate-200 hover:bg-slate-800 hover:text-white{% endif %}" {% if request.path|slice:":11" == '/dashboard/' or request.path == '/sales/dashboard' %}open{% endif %}>
                <summary class="flex cursor-pointer list-none items-center justify-between rounded-xl px-3 py-2">
                    <span class="flex items-center gap-3">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="h-5 w-5 text-primary-300">
                            <path d="M3 3.75A.75.75 0 0 1 3.75 3h16.5a.75.75 0 0 1 .75.75v14.25a.75.75 0 0 1-.75.75h-4.5a.75.75 0 0 1-.75-.75v-3.75a1.5 1.5 0 0 0-1.5-1.5h-3a1.5 1.5 0 0 0-1.5 1.5V18a.75.75 0 0 1-.75.75h-4.5A.75.75 0 0 1 3 18V3.75Z" />
                        </svg>
                        {% trans "Dashboard" %}
                    </span>
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="h-4 w-4 text-slate-400 transition group-open:rotate-180">
                        <path fill-rule="evenodd" d="M5.22 8.22a.75.75 0 0 1 1.06 0L10 11.94l3.72-3.72a.75.75 0 1 1 1.06 1.06l-4.25 4.25a.75.75 0 0 1-1.06 0L5.22 9.28a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" />
                    </svg>
                </summary>
                <div class="mt-2 space-y-1 pl-3 text-sm">
                    <p class="px-3 pt-2 text-[0.65rem] font-semibold uppercase tracking-[0.2em] text-slate-400">{% trans "Overview" %}</p>
                    <a href="{% url 'summary' %}" class="flex items-center gap-2 rounded-lg px-3 py-2 transition {% if request.path == '/dashboard/summary' %}bg-slate-800 text-white{% else %}text-slate-300 hover:bg-slate-800 hover:text-white{% endif %}">
                        <span class="h-1.5 w-1.5 rounded-full bg-primary-400/80"></span>
                        {% trans "Sales Summary" %}
                    </a>

                    <p class="px-3 pt-3 text-[0.65rem] font-semibold uppercase tracking-[0.2em] text-slate-400">{% trans "Finance" %}</p>
                    <a href="{% url 'income' %}" class="flex items-center gap-2 rounded-lg px-3 py-2 transition {% if request.path == '/dashboard/income' %}bg-slate-800 text-white{% else %}text-slate-300 hover:bg-slate-800 hover:text-white{% endif %}">
                        <span class="h-1.5 w-1.5 rounded-full bg-primary-400/80"></span>
                        {% trans "Income" %}
                    </a>
                    <a href="{% url 'expense' %}" class="flex items-center gap-2 rounded-lg px-3 py-2 transition {% if request.path == '/dashboard/expense' %}bg-slate-800 text-white{% else %}text-slate-300 hover:bg-slate-800 hover:text-white{% endif %}">
                        <span class="h-1.5 w-1.5 rounded-full bg-primary-400/80"></span>
                        {% trans "Expense" %}
                    </a>

                    <p class="px-3 pt-3 text-[0.65rem] font-semibold uppercase tracking-[0.2em] text-slate-400">{% trans "Operations" %}</p>
                    <a href="{% url 'returned' %}" class="flex items-center gap-2 rounded-lg px-3 py-2 transition {% if request.path == '/dashboard/returned' %}bg-slate-800 text-white{% else %}text-slate-300 hover:bg-slate-800 hover:text-white{% endif %}">
                        <span class="h-1.5 w-1.5 rounded-full bg-primary-400/80"></span>
                        {% trans "Return Items" %}
                    </a>
                    <a href="{% url 'customer' %}" class="flex items-center gap-2 rounded-lg px-3 py-2 transition {% if request.path == '/dashboard/customer' %}bg-slate-800 text-white{% else %}text-slate-300 hover:bg-slate-800 hover:text-white{% endif %}">
                        <span class="h-1.5 w-1.5 rounded-full bg-primary-400/80"></span>
                        {% trans "Customer Overview" %}
                    </a>
                    <a href="{% url 'base-unit' %}" class="flex items-center gap-2 rounded-lg px-3 py-2 transition {% if request.path == '/dashboard/base-unit' %}bg-slate-800 text-white{% else %}text-slate-300 hover:bg-slate-800 hover:text-white{% endif %}">
                        <span class="h-1.5 w-1.5 rounded-full bg-primary-400/80"></span>
                        {% trans "Base Unit Settings" %}
                    </a>
                    <a href="{% url 'stock-management' %}" class="flex items-center gap-2 rounded-lg px-3 py-2 transition {% if request.path == '/dashboard/stock' %}bg-slate-800 text-white{% else %}text-slate-300 hover:bg-slate-800 hover:text-white{% endif %}">
                        <span class="h-1.5 w-1.5 rounded-full bg-primary-400/80"></span>
                        {% trans "Stock Management" %}
                    </a>
                </div>
            </details>
            {% if request.user.is_superuser %}
            <a href="http://127.0.0.1:8000/admin" class="flex items-center justify-between rounded-xl px-3 py-2 transition text-slate-200 hover:bg-slate-800 hover:text-white">
                <span class="flex items-center gap-3">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="h-5 w-5 text-primary-300">
                        <path d="M11.25 2.25c-2.052 0-3.75 1.698-3.75 3.75v.563a8.963 8.963 0 0 0-2.724 1.621A.75.75 0 0 0 4.5 8.75v9.75c0 .414.336.75.75.75h13.5a.75.75 0 0 0 .75-.75V8.75a.75.75 0 0 0-.276-.566 8.963 8.963 0 0 0-2.724-1.62V6c0-2.052-1.698-3.75-3.75-3.75h-1.5Z" />
                        <path d="M9 8.25a3 3 0 0 1 6 0v.75a.75.75 0 0 1-.75.75H9.75A.75.75 0 0 1 9 9v-.75Z" />
                    </svg>
                    {% trans "Admin Dashboard" %}
                </span>
            </a>
            {% endif %}
            {% else %}
            <a href="{% url 'sign-up' %}" class="flex items-center justify-between rounded-xl px-3 py-2 transition {% if request.path == '/auth/sign-up' %}bg-primary-600 text-white shadow-lg shadow-primary-500/30{% else %}text-slate-200 hover:bg-slate-800 hover:text-white{% endif %}">
                <span class="flex items-center gap-3">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="h-5 w-5 text-primary-300">
                        <path d="M12 2.25a4.5 4.5 0 0 1 4.5 4.5v1.5h1.5a.75.75 0 0 1 0 1.5h-1.5v1.5a4.5 4.5 0 1 1-9 0v-1.5H6a.75.75 0 0 1 0-1.5h1.5v-1.5a4.5 4.5 0 0 1 4.5-4.5Z" />
                    </svg>
                    {% trans "Sign Up" %}
                </span>
            </a>
            <a href="{% url 'sign-in' %}" class="flex items-center justify-between rounded-xl px-3 py-2 transition {% if request.path == '/auth/sign-in' %}bg-primary-600 text-white shadow-lg shadow-primary-500/30{% else %}text-slate-200 hover:bg-slate-800 hover:text-white{% endif %}">
                <span class="flex items-center gap-3">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="h-5 w-5 text-primary-300">
                        <path d="M7.5 3.75a.75.75 0 0 1 .75-.75h7.5a2.25 2.25 0 0 1 2.25 2.25v13.5a2.25 2.25 0 0 1-2.25 2.25h-7.5a.75.75 0 0 1-.75-.75v-1.5a.75.75 0 0 1 1.5 0v1.5h6.75a.75.75 0 0 0 .75-.75V5.25a.75.75 0 0 0-.75-.75H9a.75.75 0 0 1-.75-.75Z" />
                        <path d="M12.22 8.47a.75.75 0 0 1 1.06 1.06l-1.72 1.72h5.94a.75.75 0 0 1 0 1.5h-5.94l1.72 1.72a.75.75 0 1 1-1.06 1.06l-3-3a.75.75 0 0 1 0-1.06l3-3Z" />
                    </svg>
                    {% trans "Sign In" %}
                </span>
            </a>
            {% endif %}
        </nav>

        <div class="space-y-3">
            <details class="group rounded-2xl border border-slate-800 bg-slate-800/40 px-4 py-3">
                <summary class="flex cursor-pointer list-none items-center justify-between text-sm font-medium text-slate-200">
                    <span class="flex items-center gap-2">
                        <span class="h-2 w-2 rounded-full bg-primary-400"></span>
                        {% trans "Language" %}
                    </span>
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="h-4 w-4 text-slate-400 transition group-open:rotate-180">
                        <path fill-rule="evenodd" d="M5.22 8.22a.75.75 0 0 1 1.06 0L10 11.94l3.72-3.72a.75.75 0 1 1 1.06 1.06l-4.25 4.25a.75.75 0 0 1-1.06 0L5.22 9.28a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" />
                    </svg>
                </summary>
                <div class="mt-3 grid gap-2 text-sm text-slate-200">
                    <a href="{% url 'switch-language' 'fa' %}" class="rounded-lg px-3 py-2 transition hover:bg-slate-700">{% trans "Persian" %}</a>
                    <a href="{% url 'switch-language' 'en' %}" class="rounded-lg px-3 py-2 transition hover:bg-slate-700">{% trans "English" %}</a>
                </div>
            </details>

            {% if request.user.is_authenticated %}
            <div class="rounded-2xl border border-slate-800 bg-slate-800/40 px-4 py-3">
                <a href="{% url 'sign-out' %}" class="flex items-center justify-between text-sm font-medium text-slate-200 transition hover:text-white">
                    <span>{% trans "Sign Out" %}</span>
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="h-4 w-4 text-slate-400">
                        <path fill-rule="evenodd" d="M3 10a.75.75 0 0 1 .75-.75h7.69l-2.22-2.22a.75.75 0 1 1 1.06-1.06l3.5 3.5a.75.75 0 0 1 0 1.06l-3.5 3.5a.75.75 0 1 1-1.06-1.06l2.22-2.22H3.75A.75.75 0 0 1 3 10Z" clip-rule="evenodd" />
                    </svg>
                </a>
            </div>
            {% endif %}
        </div>
    </div>
</aside>
